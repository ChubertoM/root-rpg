<ion-header>
  <ion-toolbar color="primary">
    <ion-buttons slot="start">
      <ion-back-button defaultHref="dashboard/campaigns"></ion-back-button>
    </ion-buttons>

    <ion-title>
      <ng-container *ngIf="data.campaign$ | async as campaign">
        {{ campaign?.name || 'Loading...' }}
      </ng-container>
    </ion-title>

  </ion-toolbar>
</ion-header>

<ion-content>
  <ng-container *ngIf="data.campaign$ | async as campaign">
    <ng-container *ngIf="data.campaignCharacters$ | async as campaignCharacters">

      <ion-row>
        <ion-col size="12" size-lg="6" offset-lg="3">
          <ion-card>
            <ion-card-header>
              <ion-card-title>Factions</ion-card-title>
              <ion-icon class="change" name="refresh" (click)="addFaction(campaign)" *ngIf="campaignCharacters.length === 0"></ion-icon>
            </ion-card-header>

            <ion-card-content>
              <ion-list>
                <ion-item *ngFor="let faction of campaign.factions">
                  {{ faction }}
                </ion-item>
              </ion-list>
            </ion-card-content>
          </ion-card>

        </ion-col>

        <ion-col size="12" size-lg="6" offset-lg="3">
          <ion-card>
            <ion-card-header>
              <ion-card-title>Actions</ion-card-title>
            </ion-card-header>

            <ion-card-content>
              <ion-list>
                <ion-item class="pointer" color="tertiary" (click)="toggleLock(campaign)">
                  <ion-icon slot="start" [name]="campaign.locked ? 'lock-open' : 'lock-closed'"></ion-icon>
                  {{ campaign.locked ? 'Unlock campaign (players will be able to join)' : 'Lock campaign (players will NOT be able to join)' }}
                </ion-item>
                <ion-item class="pointer" color="tertiary" (click)="copyID(campaign)">
                  <ion-icon slot="start" name="clipboard"></ion-icon>
                  Copy Campaign ID to Clipboard
                </ion-item>
              </ion-list>
            </ion-card-content>
          </ion-card>

        </ion-col>
      </ion-row>

    </ng-container>
  </ng-container>
</ion-content>
